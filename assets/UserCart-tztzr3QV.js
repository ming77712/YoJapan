import{S as b,a as B}from"./sweetalert2.all-Z1Mu2FYO.js";import{_ as T,f as g,m as v,r as d,o as c,c as m,a as e,g as n,w as y,F as w,i as x,t as u,h as _,n as h,E as M,G as U,p as q,e as P}from"./index-w3o53S_6.js";import{c as C}from"./cartStore-iiZ5FjU9.js";import{s as V}from"./sweetMessageStore-uXDLYKnn.js";import{P as R}from"./ProgressBar-e2tKfKYT.js";var j={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"ming777",BASE_URL:"/YoJapan/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:A,VITE_PATH:F}=j,L={data(){return{form:{user:{email:"",name:"",tel:"",address:""},message:""}}},methods:{...g(C,["getCart","changeQty","removeCartAllItem","removeCartItem"]),...g(V,["setSweetMessageSuccess","setSweetMessageError"]),createOrder(){if(this.carts.carts.length===0)this.setSweetMessageError("購物車是空的 無法送出訂單"),b.fire(this.sweetMessage);else{const o=this.form;B.post(`${A}/api/${F}/order`,{data:o}).then(s=>{this.$refs.form.resetForm(),this.form.message="",this.getCart(),this.$router.push(`/order/${s.data.orderId}`)}).catch(s=>{this.setSweetMessageError(s.response.data.message),b.fire(this.sweetMessage)})}}},mounted(){this.getCart()},computed:{...v(C,["carts","cartCount"]),...v(V,["sweetMessage"])},components:{ProgressBar:R}},a=o=>(q("data-v-e021a5b8"),o=o(),P(),o),N={class:"container mt-12"},D={class:"row justify-content-center"},O={class:"col-md-6 g-10 mb-8 mb-md-0"},$=a(()=>e("h3",{class:"fs-4"},"購物車",-1)),H=a(()=>e("hr",null,null,-1)),Q={key:0,class:"d-flex flex-column justify-content-center align-items-center"},z=a(()=>e("h3",{class:"mb-8"},"購物車現在是空的~ 快去挑選喜愛的行程吧",-1)),G={class:"row mb-4"},J={class:"col-lg-5"},Y=["src"],K={class:"col-lg-7"},W={class:"d-flex justify-content-between align-items-center"},X={class:"fs-5 mt-5 mb-6"},Z=["onClick"],ee=a(()=>e("i",{class:"bi bi-x fs-5"},null,-1)),se=[ee],te={class:"d-flex justify-content-between align-items-center"},oe={class:"input-group input-group-sm w-40 mb-3"},ae=["value","onChange"],le=["value"],ne={class:"d-flex flex-column justify-content-center"},re=a(()=>e("hr",null,null,-1)),ie={class:"d-flex justify-content-between"},de=["disabled"],ce={class:"fs-4"},me={class:"col-md-6 g-10"},ue=a(()=>e("h3",{class:"fs-4"},"訂購人資訊",-1)),_e=a(()=>e("hr",null,null,-1)),pe={class:""},fe={class:"mb-2"},he=a(()=>e("label",{for:"email",class:"form-label"},[e("span",{class:"text-danger"},"*"),_(" Email")],-1)),be={class:"mb-2"},ge=a(()=>e("label",{for:"name",class:"form-label"},[e("span",{class:"text-danger"},"*"),_(" 收件人姓名")],-1)),ve={class:"mb-2"},ye=a(()=>e("label",{for:"tel",class:"form-label"},[e("span",{class:"text-danger"},"*"),_(" 收件人電話")],-1)),we={class:"mb-2"},xe=a(()=>e("label",{for:"address",class:"form-label"},[e("span",{class:"text-danger"},"*"),_(" 收件人地址")],-1)),Ce={class:"mb-2"},Ve=a(()=>e("label",{for:"message",class:"form-label"},"留言",-1)),Se={class:"text-end"},Ee=["disabled"];function Ie(o,s,ke,Be,r,S){const E=d("ProgressBar"),I=d("RouterLink"),p=d("v-field"),f=d("error-message"),k=d("v-form");return c(),m("main",null,[e("div",N,[n(E,{progress:0}),e("div",D,[e("div",O,[$,H,o.cartCount===0?(c(),m("div",Q,[z,n(I,{to:"/products",type:"button",class:"btn btn-primary border-2 rounded-3 text-white fw-600 px-5 py-3"},{default:y(()=>[_(" 推薦行程 ")]),_:1})])):(c(!0),m(w,{key:1},x(o.carts.carts,(t,l)=>(c(),m("ul",{key:l},[e("li",G,[e("div",J,[e("img",{src:t.product.imageUrl,class:"w-100",style:{height:"150px"},alt:"product.product.title"},null,8,Y)]),e("div",K,[e("div",W,[e("h2",X,u(t.product.title),1),e("button",{type:"button",class:"btn btn-sm",onClick:i=>o.removeCartItem(t.id)},se,8,Z)]),e("div",te,[e("div",oe,[e("select",{class:"form-select",name:"qty",id:"qty",value:t.qty,onChange:i=>o.changeQty(t.id,t.product_id,i)},[(c(),m(w,null,x(20,i=>e("option",{value:i,key:i,class:"form-control"},u(i),9,le)),64))],40,ae)]),e("div",ne,[e("span",null,"價格：NT$ "+u(parseInt(t.product.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),e("span",null,"小計：NT$ "+u(parseInt(t.product.price*t.qty).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)])])])])]))),128)),re,e("div",ie,[e("button",{class:"removeCartBtn btn btn-outline-gray1 border-2 rounded-3 fw-600 px-5 py-3",type:"button",disabled:o.cartCount===0,onClick:s[0]||(s[0]=t=>o.removeCartAllItem())}," 清空購物車 ",8,de),e("span",ce,"總計：NT$ "+u(parseInt(o.carts.final_total).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)])]),e("div",me,[ue,_e,e("div",pe,[n(k,{ref:"form",class:"",onSubmit:S.createOrder},{default:y(({errors:t})=>[e("div",fe,[he,n(p,{id:"email",name:"Email",type:"email",class:h(["form-control",{"is-invalid":t.Email}]),rules:"email|required",modelValue:r.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>r.form.user.email=l),placeholder:"請輸入 Email"},null,8,["modelValue","class"]),n(f,{name:"Email",class:"invalid-feedback"})]),e("div",be,[ge,n(p,{id:"name",name:"姓名",type:"text",class:h(["form-control",{"is-invalid":t.姓名}]),rules:"required",modelValue:r.form.user.name,"onUpdate:modelValue":s[2]||(s[2]=l=>r.form.user.name=l),placeholder:"請輸入姓名"},null,8,["modelValue","class"]),n(f,{name:"姓名",class:"invalid-feedback"})]),e("div",ve,[ye,n(p,{id:"tel",name:"電話",type:"tel",class:h(["form-control",{"is-invalid":t.電話}]),rules:"required|min:8|max:10",modelValue:r.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=l=>r.form.user.tel=l),placeholder:"請輸入電話"},null,8,["modelValue","class"]),n(f,{name:"電話",class:"invalid-feedback"})]),e("div",we,[xe,n(p,{id:"address",name:"地址",type:"text",class:h(["form-control",{"is-invalid":t.地址}]),rules:"required",modelValue:r.form.user.address,"onUpdate:modelValue":s[4]||(s[4]=l=>r.form.user.address=l),placeholder:"請輸入地址"},null,8,["modelValue","class"]),n(f,{name:"地址",class:"invalid-feedback"})]),e("div",Ce,[Ve,M(e("textarea",{name:"",id:"message",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=l=>r.form.message=l),cols:"30",rows:"10"},null,512),[[U,r.form.message]])]),e("div",Se,[e("button",{type:"submit",class:"btn btn-primary border-2 rounded-3 text-white fw-600 px-5 py-3",disabled:o.cartCount===0},"送出訂單",8,Ee)])]),_:1},8,["onSubmit"])])])])])])}const Re=T(L,[["render",Ie],["__scopeId","data-v-e021a5b8"]]);export{Re as default};
