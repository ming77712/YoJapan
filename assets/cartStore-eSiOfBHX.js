import{C as g}from"./index-NnlbEwpK.js";import{a as o,S as l}from"./sweetalert2.all-FS2xVMHR.js";import{s as i}from"./sweetMessageStore-aReIbNgC.js";var m={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"ming777",BASE_URL:"/YoJapan/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:c,VITE_PATH:n}=m,u=g("cartStore",{state:()=>({carts:[],cartCount:0,loadingStatus:""}),actions:{getCart(){const{toastMessage:e}=i();o.get(`${c}/api/${n}/cart`).then(t=>{this.carts=t.data.data,this.cartCount=this.carts.carts.length}).catch(t=>{e.fire({icon:"error",title:t.response.data.message})})},addToCart(e,t,a=1){const{toastMessage:r}=i(),d={product_id:e,qty:a};this.loadingStatus=e,o.post(`${c}/api/${n}/cart`,{data:d}).then(s=>{t&&t("/products"),r.fire({icon:"success",title:s.data.message}),this.loadingStatus="",this.getCart()}).catch(s=>{r.fire({icon:"error",title:s.response.data.message})})},changeQty(e,t,a){const{toastMessage:r}=i(),d={product_id:t,qty:Number(a.target.value)};o.put(`${c}/api/${n}/cart/${e}`,{data:d}).then(s=>{r.fire({icon:"success",title:s.data.message}),this.getCart()}).catch(s=>{r.fire({icon:"error",title:s.response.data.message})})},removeCartAllItem(){const{toastMessage:e}=i();l.fire({title:"確定要清空購物車?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then(t=>{t.isConfirmed&&o.delete(`${c}/api/${n}/carts`).then(a=>{e.fire({icon:"success",title:a.data.message}),this.getCart()}).catch(a=>{e.fire({icon:"error",title:a.response.data.message})})})},removeCartItem(e){const{toastMessage:t}=i();o.delete(`${c}/api/${n}/cart/${e}`).then(a=>{t.fire({icon:"success",title:a.data.message}),this.getCart()}).catch(a=>{t.fire({icon:"error",title:a.response.data.message})})}}});export{u as c};
