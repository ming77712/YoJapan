import{_ as z,r as P,o as T,c as S,e as M,w as x,F as R,i as q,b as H,a as i,n as J,d as j,h as $,t as y,j as A,p as G,g as X,m as Q}from"./index-dc4WJSyT.js";import{p as U}from"./productsStore-tVCBlRdc.js";import{c as F}from"./cartStore-tXktd8rV.js";import{g as K,j as W,e as Z,n as V,h as O,S as ee,i as te}from"./swiper-nHxjbVlv.js";import"./sweetalert2.all-f2Sh1CBp.js";import"./sweetMessageStore-FHUu6KQR.js";function se(r){let{swiper:e,extendParams:g,on:f}=r;g({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let h=!1,_=!1;e.thumbs={swiper:null};function w(){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const t=s.clickedIndex,c=s.clickedSlide;if(c&&c.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let u;s.params.loop?u=parseInt(s.clickedSlide.getAttribute("data-swiper-slide-index"),10):u=t,e.params.loop?e.slideToLoop(u):e.slideTo(u)}function d(){const{thumbs:s}=e.params;if(h)return!1;h=!0;const t=e.constructor;if(s.swiper instanceof t)e.thumbs.swiper=s.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(W(s.swiper)){const c=Object.assign({},s.swiper);Object.assign(c,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(c),_=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",w),!0}function a(s){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const c=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let u=1;const l=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(u=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),t.slides.forEach(p=>p.classList.remove(l)),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let p=0;p<u;p+=1)Z(t.slidesEl,`[data-swiper-slide-index="${e.realIndex+p}"]`).forEach(n=>{n.classList.add(l)});else for(let p=0;p<u;p+=1)t.slides[e.realIndex+p]&&t.slides[e.realIndex+p].classList.add(l);const m=e.params.thumbs.autoScrollOffset,I=m&&!t.params.loop;if(e.realIndex!==t.realIndex||I){const p=t.activeIndex;let n,k;if(t.params.loop){const o=t.slides.filter(C=>C.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];n=t.slides.indexOf(o),k=e.activeIndex>e.previousIndex?"next":"prev"}else n=e.realIndex,k=n>e.previousIndex?"next":"prev";I&&(n+=k==="next"?m:-1*m),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(n)<0&&(t.params.centeredSlides?n>p?n=n-Math.floor(c/2)+1:n=n+Math.floor(c/2)-1:n>p&&t.params.slidesPerGroup,t.slideTo(n,s?0:void 0))}}f("beforeInit",()=>{const{thumbs:s}=e.params;if(!(!s||!s.swiper))if(typeof s.swiper=="string"||s.swiper instanceof HTMLElement){const t=K(),c=()=>{const l=typeof s.swiper=="string"?t.querySelector(s.swiper):s.swiper;if(l&&l.swiper)s.swiper=l.swiper,d(),a(!0);else if(l){const m=I=>{s.swiper=I.detail[0],l.removeEventListener("init",m),d(),a(!0),s.swiper.update(),e.update()};l.addEventListener("init",m)}return l},u=()=>{if(e.destroyed)return;c()||requestAnimationFrame(u)};requestAnimationFrame(u)}else d(),a(!0)}),f("slideChange update resize observerUpdate",()=>{a()}),f("setTransition",(s,t)=>{const c=e.thumbs.swiper;!c||c.destroyed||c.setTransition(t)}),f("beforeDestroy",()=>{const s=e.thumbs.swiper;!s||s.destroyed||_&&s.destroy()}),Object.assign(e.thumbs,{init:d,update:a})}function ie(r){let{swiper:e,extendParams:g,emit:f,once:h}=r;g({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function _(){if(e.params.cssMode)return;const a=e.getTranslate();e.setTranslate(a),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function w(){if(e.params.cssMode)return;const{touchEventsData:a,touches:s}=e;a.velocities.length===0&&a.velocities.push({position:s[e.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:s[e.isHorizontal()?"currentX":"currentY"],time:V()})}function d(a){let{currentPos:s}=a;if(e.params.cssMode)return;const{params:t,wrapperEl:c,rtlTranslate:u,snapGrid:l,touchEventsData:m}=e,p=V()-m.touchStartTime;if(s<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(s>-e.maxTranslate()){e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(m.velocities.length>1){const b=m.velocities.pop(),v=m.velocities.pop(),Y=b.position-v.position,N=b.time-v.time;e.velocity=Y/N,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),(N>150||V()-b.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,m.velocities.length=0;let n=1e3*t.freeMode.momentumRatio;const k=e.velocity*n;let o=e.translate+k;u&&(o=-o);let C=!1,B;const L=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let D;if(o<e.maxTranslate())t.freeMode.momentumBounce?(o+e.maxTranslate()<-L&&(o=e.maxTranslate()-L),B=e.maxTranslate(),C=!0,m.allowMomentumBounce=!0):o=e.maxTranslate(),t.loop&&t.centeredSlides&&(D=!0);else if(o>e.minTranslate())t.freeMode.momentumBounce?(o-e.minTranslate()>L&&(o=e.minTranslate()+L),B=e.minTranslate(),C=!0,m.allowMomentumBounce=!0):o=e.minTranslate(),t.loop&&t.centeredSlides&&(D=!0);else if(t.freeMode.sticky){let b;for(let v=0;v<l.length;v+=1)if(l[v]>-o){b=v;break}Math.abs(l[b]-o)<Math.abs(l[b-1]-o)||e.swipeDirection==="next"?o=l[b]:o=l[b-1],o=-o}if(D&&h("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(u?n=Math.abs((-o-e.translate)/e.velocity):n=Math.abs((o-e.translate)/e.velocity),t.freeMode.sticky){const b=Math.abs((u?-o:o)-e.translate),v=e.slidesSizesGrid[e.activeIndex];b<v?n=t.speed:b<2*v?n=t.speed*1.5:n=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&C?(e.updateProgress(B),e.setTransition(n),e.setTranslate(o),e.transitionStart(!0,e.swipeDirection),e.animating=!0,O(c,()=>{!e||e.destroyed||!m.allowMomentumBounce||(f("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(B),O(c,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(f("_freeModeNoMomentumRelease"),e.updateProgress(o),e.setTransition(n),e.setTranslate(o),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,O(c,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(o),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&f("_freeModeNoMomentumRelease");(!t.freeMode.momentum||p>=t.longSwipesMs)&&(f("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:_,onTouchMove:w,onTouchEnd:d}})}const oe={props:["images"],data(){return{imagesLength:0,thumbsSwiper:{value:null},modules:[ie,se]}},methods:{setThumbsSwiper(r){this.thumbsSwiper.value=r}},computed:{activeSlideIndex(){return this.thumbsSwiper.value?this.thumbsSwiper.value.realIndex:0}},watch:{images(){this.imagesLength=this.images.length}},components:{Swiper:ee,SwiperSlide:te}},re=["src"],ne=["src"];function ae(r,e,g,f,h,_){const w=P("swiper-slide"),d=P("swiper");return T(),S(R,null,[M(d,{thumbs:{swiper:h.thumbsSwiper.value},modules:h.modules,class:"mb-6"},{default:x(()=>[(T(!0),S(R,null,q(g.images,(a,s)=>(T(),H(w,{class:"swiper-slide-thumb-active",key:s},{default:x(()=>[i("img",{class:"grab w-100",src:a,alt:"",style:{height:"400px"}},null,8,re)]),_:2},1024))),128))]),_:1},8,["thumbs","modules"]),M(d,{onSwiper:_.setThumbsSwiper,spaceBetween:10,slidesPerView:h.imagesLength,freeMode:!0,watchSlidesProgress:!0,modules:h.modules},{default:x(()=>[(T(!0),S(R,null,q(g.images,(a,s)=>(T(),H(w,{class:J({"swiper-slide-thumb-active":_.activeSlideIndex===s}),key:s},{default:x(()=>[i("img",{class:"pointer w-100",src:a,alt:"",style:{height:"100px"}},null,8,ne)]),_:2},1032,["class"]))),128))]),_:1},8,["onSwiper","slidesPerView","modules"])],64)}const le=z(oe,[["render",ae],["__scopeId","data-v-e8d1ea3b"]]),de={props:["pickProducts"],data(){return{}},methods:{...j(F,["addToCart"])},mounted(){}},ce=r=>(G("data-v-d23f4d13"),r=r(),X(),r),ue={class:"row g-3 g-md-4 g-lg-5"},me={class:"position-relative card rounded-0"},pe={class:"card-top overflow-hidden"},he=["src","alt"],fe={class:"position-absolute d-inline top-0 end-0 badge rounded-0 bg-white text-black"},be=ce(()=>i("i",{class:"bi bi-geo-alt-fill me-1"},null,-1)),_e={class:"card-body"},we={class:"card-title mb-10",style:{height:"60px"}},ve={class:"d-flex justify-content-between"},ge={class:"fs-5 fs-xl-4"},ye=["onClick"];function Te(r,e,g,f,h,_){const w=P("RouterLink");return T(),S("ul",ue,[(T(!0),S(R,null,q(g.pickProducts,(d,a)=>(T(),S("li",{key:a,class:"col-md-6 col-lg-3"},[M(w,{to:`/products/${d.id}`,class:"zoomIn w-100"},{default:x(()=>[i("div",me,[i("div",pe,[i("img",{src:d.imageUrl,class:"productImgHeight w-100",alt:d.title},null,8,he),i("div",fe,[be,$(y(d.category),1)])]),i("div",_e,[i("h5",we,y(d.title),1),i("div",ve,[i("span",ge,"$ "+y(parseInt(d.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),i("button",{type:"button",class:"btn btn-primary",onClick:A(s=>r.addToCart(d.id),["prevent"])}," 加入購物車 ",8,ye)])])])]),_:2},1032,["to"])]))),128))])}const Se=z(de,[["render",Te],["__scopeId","data-v-d23f4d13"]]),xe={data(){return{qty:1}},methods:{...j(U,["getProduct"]),...j(F,["addToCart"]),addQty(){this.qty<20&&(this.qty+=1)},subQty(){this.qty>1&&(this.qty-=1)}},mounted(){const{id:r}=this.$route.params;this.getProduct(r)},watch:{"$route.params":{handler(r){const{id:e}=r;this.getProduct(e)},deep:!0}},computed:{...Q(U,["currentProduct","randomProducts"]),...Q(F,["carts"])},components:{ProductDetailSwiper:le,RecommendProducts:Se}},E=r=>(G("data-v-9f1bc46b"),r=r(),X(),r),Pe={class:"py-lg-12 py-md-10 py-8"},Me={class:"container"},Ie={class:"mb-6","aria-label":"breadcrumb"},ke={class:"breadcrumb"},Ce={class:"breadcrumb-item"},$e={class:"breadcrumb-item active","aria-current":"page"},Ee={class:"row"},Be={class:"col-md-6 col-xl-7 mb-4 mb-md-0"},Le={class:"col-md-6 col-xl-5"},Re={class:"border-bottom mb-10"},Ae={class:"fs-11"},De={class:"d-block my-3 text-gray"},Ve=E(()=>i("i",{class:"bi bi-geo-alt-fill me-2"},null,-1)),Oe={class:"border-bottom pb-10"},qe={class:"rounded-5 bg-gray300 p-md-4 p-lg-6 mt-10"},je={class:"d-flex d-md-block flex-column align-items-center"},Fe={class:"fs-11 mb-1 mb-md-2"},ze={class:"fs-5 mb-2 mb-md-6"},Ne={class:"d-md-flex mb-2"},He={class:"d-flex me-5 mb-2 mb-md-0"},Qe=["disabled"],Ue=E(()=>i("i",{class:"bi bi-dash fs-4"},null,-1)),Ge=[Ue],Xe=["value"],Ye=["disabled"],Je=E(()=>i("i",{class:"bi bi-plus fs-4"},null,-1)),Ke=[Je],We=E(()=>i("hr",{class:"mb-10"},null,-1)),Ze=E(()=>i("h3",{class:"mb-4"},"其他行程推薦",-1));function et(r,e,g,f,h,_){const w=P("RouterLink"),d=P("ProductDetailSwiper"),a=P("RecommendProducts");return T(),S("main",Pe,[i("div",Me,[i("nav",Ie,[i("ol",ke,[i("li",Ce,[M(w,{to:"/products"},{default:x(()=>[$("推薦行程")]),_:1})]),i("li",$e,y(this.currentProduct.title),1)])]),i("div",Ee,[i("div",Be,[M(d,{images:this.currentProduct.imagesUrl},null,8,["images"])]),i("div",Le,[i("div",Re,[i("h2",Ae,y(this.currentProduct.title),1),i("span",De,[Ve,$(y(this.currentProduct.category),1)])]),i("div",Oe,[i("p",null,y(this.currentProduct.description),1)]),i("div",qe,[i("div",je,[i("div",Fe,y(parseInt(this.currentProduct.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","))+" 元",1),i("div",ze,[$("原價 "),i("del",null,y(parseInt(this.currentProduct.origin_price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),$(" 元")]),i("div",Ne,[i("div",He,[i("button",{type:"button",class:"borderRounded me-2",onClick:e[0]||(e[0]=A(s=>_.subQty(),["prevent"])),disabled:h.qty===1},Ge,8,Qe),i("input",{type:"number",class:"form-control border-0 fs-4 me-2",style:{width:"80px"},min:"1",value:h.qty,readonly:""},null,8,Xe),i("button",{type:"button",class:"borderRounded",onClick:e[1]||(e[1]=A(s=>_.addQty(),["prevent"])),disabled:h.qty===20},Ke,8,Ye)]),i("button",{type:"button",class:"btn btn-primary",style:{width:"200px"},onClick:e[2]||(e[2]=A(s=>r.addToCart(this.currentProduct.id,this.$router.push,this.qty),["prevent"]))}," 加入購物車 ")])])])])]),We,Ze,M(a,{"pick-products":r.randomProducts},null,8,["pick-products"])])])}const at=z(xe,[["render",et],["__scopeId","data-v-9f1bc46b"]]);export{at as default};
