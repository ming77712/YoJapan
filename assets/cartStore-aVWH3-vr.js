import{D as d}from"./index-jrxlQHfL.js";import{a as r,S as f}from"./sweetalert2.all-pFP6cB6p.js";import{s as i}from"./sweetMessageStore-QmXful6G.js";var g={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"ming777",BASE_URL:"/YoJapan/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:c,VITE_PATH:n}=g,p=d("cartStore",{state:()=>({carts:[],cartCount:0,loadingStatus:""}),actions:{getCart(){const{toastMessage:e}=i();r.get(`${c}/api/${n}/cart`).then(t=>{this.carts=t.data.data,this.cartCount=this.carts.carts.length}).catch(t=>{e.fire({icon:"error",title:t.response.data.message})})},addToCart(e,t=1){const{toastMessage:a}=i(),s={product_id:e,qty:t};this.loadingStatus=e,r.post(`${c}/api/${n}/cart`,{data:s}).then(o=>{a.fire({icon:"success",title:o.data.message}),this.loadingStatus="",this.getCart()}).catch(o=>{a.fire({icon:"error",title:o.response.data.message})})},changeQty(e,t,a){const{toastMessage:s}=i(),o={product_id:t,qty:Number(a.target.value)};r.put(`${c}/api/${n}/cart/${e}`,{data:o}).then(l=>{s.fire({icon:"success",title:l.data.message}),this.getCart()}).catch(l=>{s.fire({icon:"error",title:l.response.data.message})})},removeCartAllItem(){const{toastMessage:e}=i();f.fire({title:"確定要清空購物車?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#ff5b00",confirmButtonText:"確定",cancelButtonText:"取消"}).then(t=>{t.isConfirmed&&r.delete(`${c}/api/${n}/carts`).then(a=>{e.fire({icon:"success",title:a.data.message}),this.getCart()}).catch(a=>{e.fire({icon:"error",title:a.response.data.message})})})},removeCartItem(e){const{toastMessage:t}=i();f.fire({title:"確定要刪除該商品?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#ff5b00",confirmButtonText:"確定",cancelButtonText:"取消"}).then(a=>{a.isConfirmed&&r.delete(`${c}/api/${n}/cart/${e}`).then(s=>{t.fire({icon:"success",title:s.data.message}),this.getCart()}).catch(s=>{t.fire({icon:"error",title:s.response.data.message})})})}}});export{p as c};
