import{a as _,S as p}from"./sweetalert2.all-sBgHJ5B_.js";import{_ as S,f as k,m as E,r as m,o as i,c,a as s,g as n,w as u,F as h,i as I,t,d as P,h as f,p as B,e as M}from"./index-7GBEASIJ.js";import{s as g}from"./sweetMessageStore-iyrynX18.js";import{P as T}from"./ProgressBar-NoSYX0_C.js";var V={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"ming777",BASE_URL:"/YoJapan/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y,VITE_PATH:b}=V,O={data(){return{order:{},isPaid:!1,progress:50}},methods:{...k(g,["setSweetMessageSuccess","setSweetMessageError"]),getOrder(o){_.get(`${y}/api/${b}/order/${o}`).then(r=>{this.order=r.data.order,this.order.is_paid===!0&&(this.isPaid=!0,this.progress=100)}).catch(r=>{this.setSweetMessageError(r.response.data.message),p.fire(this.sweetMessage)})},payOrder(o){_.post(`${y}/api/${b}/pay/${o}`).then(r=>{r.data.success&&(this.isPaid=!0,this.progress=100)}).catch(r=>{this.setSweetMessageError(r.response.data.message),p.fire(this.sweetMessage)})}},mounted(){const{id:o}=this.$route.params;this.getOrder(o)},computed:{...E(g,["sweetMessage"])},components:{ProgressBar:T}},a=o=>(B("data-v-c5364549"),o=o(),M(),o),R={class:"container my-12"},L={key:0,class:"d-flex flex-column justify-content-center align-items-center mt-10"},N=a(()=>s("h2",{class:"mb-8"},"付款完成",-1)),F=a(()=>s("h3",{class:"fs-4"},"訂單資訊",-1)),U=a(()=>s("hr",null,null,-1)),j={class:"row justify-content-center"},A={class:"col-md-7 mb-8 mb-md-0"},C={class:"row mb-4"},D={class:"col-md-5"},q=["src"],H={class:"col-md-7"},J={class:"fs-5 mt-5 mb-6"},Y={class:"d-flex justify-content-between align-items-center"},z={class:"mb-1"},G={class:"col-md-5"},K={key:0,class:"d-flex flex-column justify-content-between border-top border-md-0 p-4 mb-9",style:{height:"500px"}},Q={class:"fs-5"},W={class:"fs-5"},X={class:"fs-5"},Z={class:"fs-5"},$={class:"fs-5"},ss={class:"fs-5"},es={key:0,class:"fs-5"},ts={key:1,class:"text-success fs-5"},os={class:"fs-5"};function rs(o,r,is,cs,e,x){const w=m("ProgressBar"),l=m("RouterLink");return i(),c("main",null,[s("div",R,[n(w,{progress:e.progress},null,8,["progress"]),e.isPaid?(i(),c("div",L,[N,s("div",null,[n(l,{to:"/",type:"button",class:"btn btnOutline border-2 rounded-3 fw-600 px-5 py-3 me-2"},{default:u(()=>[f(" 返回首頁 ")]),_:1}),n(l,{to:"/products",type:"button",class:"btn btn-primary border-2 rounded-3 fw-600 px-5 py-3"},{default:u(()=>[f(" 繼續選購 ")]),_:1})])])):(i(),c(h,{key:1},[F,U,s("div",j,[s("div",A,[(i(!0),c(h,null,I(e.order.products,(d,v)=>(i(),c("ul",{key:v},[s("li",C,[s("div",D,[s("img",{src:d.product.imageUrl,class:"w-100",style:{height:"150px"},alt:"product.product.title"},null,8,q)]),s("div",H,[s("h2",J,t(d.product.title),1),s("div",Y,[s("div",null,[s("div",z,"價格：NT$ "+t(parseInt(d.product.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","))+" x "+t(d.qty),1),s("div",null,"小計：NT$ "+t(parseInt(d.product.price*d.qty).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)])])])])]))),128))]),s("div",G,[e.order.user?(i(),c("ul",K,[s("li",Q,"訂單編號："+t(e.order.id),1),s("li",W,"信箱："+t(e.order.user.email),1),s("li",X,"姓名："+t(e.order.user.name),1),s("li",Z,"收件人電話："+t(e.order.user.tel),1),s("li",$,"收件人地址："+t(e.order.user.address),1),s("li",ss,"訂單金額："+t(parseInt(e.order.total).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),e.order.is_paid?(i(),c("li",ts,"付款狀態：付款完成")):(i(),c("li",es,"付款狀態：尚未付款")),s("li",os,"備註："+t(e.order.message),1)])):P("",!0),s("button",{type:"submit",class:"btn btn-primary border-2 rounded-3 text-white fw-600 px-5 py-3 ms-5 w-50",onClick:r[0]||(r[0]=d=>x.payOrder(e.order.id))}," 確認付款 ")])])],64))])])}const _s=S(O,[["render",rs],["__scopeId","data-v-c5364549"]]);export{_s as default};
