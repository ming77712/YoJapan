import{a as d,S as _}from"./sweetalert2.all-FS2xVMHR.js";import{_ as w,m as S,a as k,r as m,o as r,c as i,d as s,b as a,w as h,F as p,i as E,t,e as P,g as u}from"./index-NnlbEwpK.js";import{s as f}from"./sweetMessageStore-aReIbNgC.js";import{P as B}from"./ProgressBar-s2C4Ll1j.js";var M={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"ming777",BASE_URL:"/YoJapan/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:g,VITE_PATH:y}=M,V={data(){return{order:{},isPaid:!1,progress:50}},methods:{...S(f,["setSweetMessageSuccess","setSweetMessageError"]),getOrder(n){d.get(`${g}/api/${y}/order/${n}`).then(o=>{this.order=o.data.order,this.order.is_paid===!0&&(this.isPaid=!0,this.progress=100)}).catch(o=>{this.setSweetMessageError(o.response.data.message),_.fire(this.sweetMessage)})},payOrder(n){d.post(`${g}/api/${y}/pay/${n}`).then(o=>{o.data.success&&(this.isPaid=!0,this.progress=100)}).catch(o=>{this.setSweetMessageError(o.response.data.message),_.fire(this.sweetMessage)})}},mounted(){const{id:n}=this.$route.params;this.getOrder(n)},computed:{...k(f,["sweetMessage"])},components:{ProgressBar:B}},I={class:"container mt-12"},O={key:0,class:"d-flex flex-column justify-content-center align-items-center mt-10"},R=s("h2",{class:"mb-8"},"付款完成",-1),T=s("h3",{class:"text-center fs-4"},"訂單資訊",-1),L=s("hr",null,null,-1),F={class:"row justify-content-center"},U={class:"col-md-7 mb-8 mb-md-0"},j={class:"row mb-4"},A={class:"col-md-5"},C=["src"],D={class:"col-md-7"},N={class:"fs-5 mt-5 mb-6"},q={class:"d-flex justify-content-between align-items-center"},H={class:"mb-1"},J={class:"col-md-5"},Y={key:0,class:"d-flex flex-column justify-content-evenly",style:{height:"500px"}},z={class:"fs-5"},G={class:"fs-5"},K={class:"fs-5"},Q={class:"fs-5"},W={class:"fs-5"},X={class:"fs-5"},Z={key:0,class:"fs-5"},$={key:1,class:"text-success fs-5"},ss={class:"fs-5"},es=s("hr",null,null,-1),ts={class:"text-center"};function os(n,o,rs,is,e,x){const v=m("ProgressBar"),l=m("RouterLink");return r(),i("main",null,[s("div",I,[a(v,{progress:e.progress},null,8,["progress"]),e.isPaid?(r(),i("div",O,[R,s("div",null,[a(l,{to:"/products",type:"button",class:"btn btn-primary me-2"},{default:h(()=>[u(" 繼續選購 ")]),_:1}),a(l,{to:"/",type:"button",class:"btn btn-secondary"},{default:h(()=>[u(" 返回首頁 ")]),_:1})])])):(r(),i(p,{key:1},[T,L,s("div",F,[s("div",U,[(r(!0),i(p,null,E(e.order.products,(c,b)=>(r(),i("ul",{key:b},[s("li",j,[s("div",A,[s("img",{src:c.product.imageUrl,class:"w-100",style:{height:"150px"},alt:""},null,8,C)]),s("div",D,[s("h2",N,t(c.product.title),1),s("div",q,[s("div",null,[s("div",H,"價格：$ "+t(parseInt(c.product.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","))+" x "+t(c.qty),1),s("div",null,"小計：$ "+t(parseInt(c.product.price*c.qty).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)])])])])]))),128))]),s("div",J,[e.order.user?(r(),i("ul",Y,[s("li",z,"訂單編號："+t(e.order.id),1),s("li",G,"信箱："+t(e.order.user.email),1),s("li",K,"姓名："+t(e.order.user.name),1),s("li",Q,"收件人電話："+t(e.order.user.tel),1),s("li",W,"收件人地址："+t(e.order.user.address),1),s("li",X,"訂單金額："+t(parseInt(e.order.total).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),e.order.is_paid?(r(),i("li",$,"付款狀態：付款完成")):(r(),i("li",Z,"付款狀態：尚未付款")),s("li",ss,"備註："+t(e.order.message),1)])):P("",!0)])]),es,s("div",ts,[s("button",{type:"submit",class:"btn btn-primary w-50",onClick:o[0]||(o[0]=c=>x.payOrder(e.order.id))}," 確認付款 ")])],64))])])}const ds=w(V,[["render",os]]);export{ds as default};
