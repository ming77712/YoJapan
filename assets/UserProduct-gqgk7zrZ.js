import{_ as N,r as P,o as y,c as T,g as M,w as S,F as L,i as O,b as U,a as s,n as K,p as z,e as H,f as j,h as A,t as x,j as D,m as G}from"./index-w3o53S_6.js";import{p as X}from"./productsStore-x8GHYmDC.js";import{c as F}from"./cartStore-iiZ5FjU9.js";import{g as W,i as Z,j as ee,n as V,f as q,N as te,S as se,h as ie}from"./navigation-tSCvt4N4.js";import"./sweetalert2.all-Z1Mu2FYO.js";import"./sweetMessageStore-uXDLYKnn.js";function oe(o){let{swiper:e,extendParams:g,on:f}=o;g({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let h=!1,_=!1;e.thumbs={swiper:null};function w(){const i=e.thumbs.swiper;if(!i||i.destroyed)return;const t=i.clickedIndex,c=i.clickedSlide;if(c&&c.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof t>"u"||t===null)return;let u;i.params.loop?u=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10):u=t,e.params.loop?e.slideToLoop(u):e.slideTo(u)}function d(){const{thumbs:i}=e.params;if(h)return!1;h=!0;const t=e.constructor;if(i.swiper instanceof t)e.thumbs.swiper=i.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(Z(i.swiper)){const c=Object.assign({},i.swiper);Object.assign(c,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new t(c),_=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",w),!0}function a(i){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const c=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():t.params.slidesPerView;let u=1;const l=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(u=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),t.slides.forEach(p=>p.classList.remove(l)),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let p=0;p<u;p+=1)ee(t.slidesEl,`[data-swiper-slide-index="${e.realIndex+p}"]`).forEach(n=>{n.classList.add(l)});else for(let p=0;p<u;p+=1)t.slides[e.realIndex+p]&&t.slides[e.realIndex+p].classList.add(l);const m=e.params.thumbs.autoScrollOffset,I=m&&!t.params.loop;if(e.realIndex!==t.realIndex||I){const p=t.activeIndex;let n,k;if(t.params.loop){const r=t.slides.filter(C=>C.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];n=t.slides.indexOf(r),k=e.activeIndex>e.previousIndex?"next":"prev"}else n=e.realIndex,k=n>e.previousIndex?"next":"prev";I&&(n+=k==="next"?m:-1*m),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(n)<0&&(t.params.centeredSlides?n>p?n=n-Math.floor(c/2)+1:n=n+Math.floor(c/2)-1:n>p&&t.params.slidesPerGroup,t.slideTo(n,i?0:void 0))}}f("beforeInit",()=>{const{thumbs:i}=e.params;if(!(!i||!i.swiper))if(typeof i.swiper=="string"||i.swiper instanceof HTMLElement){const t=W(),c=()=>{const l=typeof i.swiper=="string"?t.querySelector(i.swiper):i.swiper;if(l&&l.swiper)i.swiper=l.swiper,d(),a(!0);else if(l){const m=I=>{i.swiper=I.detail[0],l.removeEventListener("init",m),d(),a(!0),i.swiper.update(),e.update()};l.addEventListener("init",m)}return l},u=()=>{if(e.destroyed)return;c()||requestAnimationFrame(u)};requestAnimationFrame(u)}else d(),a(!0)}),f("slideChange update resize observerUpdate",()=>{a()}),f("setTransition",(i,t)=>{const c=e.thumbs.swiper;!c||c.destroyed||c.setTransition(t)}),f("beforeDestroy",()=>{const i=e.thumbs.swiper;!i||i.destroyed||_&&i.destroy()}),Object.assign(e.thumbs,{init:d,update:a})}function re(o){let{swiper:e,extendParams:g,emit:f,once:h}=o;g({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function _(){if(e.params.cssMode)return;const a=e.getTranslate();e.setTranslate(a),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function w(){if(e.params.cssMode)return;const{touchEventsData:a,touches:i}=e;a.velocities.length===0&&a.velocities.push({position:i[e.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:i[e.isHorizontal()?"currentX":"currentY"],time:V()})}function d(a){let{currentPos:i}=a;if(e.params.cssMode)return;const{params:t,wrapperEl:c,rtlTranslate:u,snapGrid:l,touchEventsData:m}=e,p=V()-m.touchStartTime;if(i<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(i>-e.maxTranslate()){e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(m.velocities.length>1){const b=m.velocities.pop(),v=m.velocities.pop(),J=b.position-v.position,Q=b.time-v.time;e.velocity=J/Q,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),(Q>150||V()-b.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,m.velocities.length=0;let n=1e3*t.freeMode.momentumRatio;const k=e.velocity*n;let r=e.translate+k;u&&(r=-r);let C=!1,E;const B=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let R;if(r<e.maxTranslate())t.freeMode.momentumBounce?(r+e.maxTranslate()<-B&&(r=e.maxTranslate()-B),E=e.maxTranslate(),C=!0,m.allowMomentumBounce=!0):r=e.maxTranslate(),t.loop&&t.centeredSlides&&(R=!0);else if(r>e.minTranslate())t.freeMode.momentumBounce?(r-e.minTranslate()>B&&(r=e.minTranslate()+B),E=e.minTranslate(),C=!0,m.allowMomentumBounce=!0):r=e.minTranslate(),t.loop&&t.centeredSlides&&(R=!0);else if(t.freeMode.sticky){let b;for(let v=0;v<l.length;v+=1)if(l[v]>-r){b=v;break}Math.abs(l[b]-r)<Math.abs(l[b-1]-r)||e.swipeDirection==="next"?r=l[b]:r=l[b-1],r=-r}if(R&&h("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(u?n=Math.abs((-r-e.translate)/e.velocity):n=Math.abs((r-e.translate)/e.velocity),t.freeMode.sticky){const b=Math.abs((u?-r:r)-e.translate),v=e.slidesSizesGrid[e.activeIndex];b<v?n=t.speed:b<2*v?n=t.speed*1.5:n=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&C?(e.updateProgress(E),e.setTransition(n),e.setTranslate(r),e.transitionStart(!0,e.swipeDirection),e.animating=!0,q(c,()=>{!e||e.destroyed||!m.allowMomentumBounce||(f("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(E),q(c,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(f("_freeModeNoMomentumRelease"),e.updateProgress(r),e.setTransition(n),e.setTranslate(r),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,q(c,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(r),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&f("_freeModeNoMomentumRelease");(!t.freeMode.momentum||p>=t.longSwipesMs)&&(f("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:_,onTouchMove:w,onTouchEnd:d}})}const ne={props:["images"],data(){return{imagesLength:0,thumbsSwiper:{value:null},modules:[te,re,oe]}},methods:{setThumbsSwiper(o){this.thumbsSwiper.value=o}},computed:{activeSlideIndex(){return this.thumbsSwiper.value?this.thumbsSwiper.value.realIndex:0}},watch:{images(){this.imagesLength=this.images.length}},components:{Swiper:se,SwiperSlide:ie}},Y=o=>(z("data-v-96e13ee0"),o=o(),H(),o),ae=["src"],le=Y(()=>s("div",{class:"swiper-button-prev"},[s("i",{class:"bi bi-arrow-left-square-fill text-gray300 fs-10"})],-1)),de=Y(()=>s("div",{class:"swiper-button-next"},[s("i",{class:"bi bi-arrow-right-square-fill text-gray300 fs-10"})],-1)),ce=["src"];function ue(o,e,g,f,h,_){const w=P("swiper-slide"),d=P("swiper");return y(),T(L,null,[M(d,{thumbs:{swiper:h.thumbsSwiper.value},modules:h.modules,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},class:"mb-6"},{default:S(()=>[(y(!0),T(L,null,O(g.images,(a,i)=>(y(),U(w,{class:"swiper-slide-thumb-active",key:i},{default:S(()=>[s("img",{class:"grab w-100",src:a,alt:"thumb-active-pic",style:{height:"400px"}},null,8,ae)]),_:2},1024))),128)),le,de]),_:1},8,["thumbs","modules","navigation"]),M(d,{onSwiper:_.setThumbsSwiper,spaceBetween:10,slidesPerView:h.imagesLength,freeMode:!0,watchSlidesProgress:!0,modules:h.modules},{default:S(()=>[(y(!0),T(L,null,O(g.images,(a,i)=>(y(),U(w,{class:K({"swiper-slide-thumb-active":_.activeSlideIndex===i}),key:i},{default:S(()=>[s("img",{class:"pointer w-100",src:a,alt:"thumb-pic",style:{height:"100px"}},null,8,ce)]),_:2},1032,["class"]))),128))]),_:1},8,["onSwiper","slidesPerView","modules"])],64)}const me=N(ne,[["render",ue],["__scopeId","data-v-96e13ee0"]]),pe={props:["pickProducts"],data(){return{}},methods:{...j(F,["addToCart"])},mounted(){}},he=o=>(z("data-v-b28e4fbc"),o=o(),H(),o),fe={class:"row g-3 g-md-4 g-lg-5"},be={class:"position-relative card rounded-0"},_e={class:"card-top overflow-hidden"},we=["src","alt"],ve={class:"position-absolute d-inline top-0 end-0 badge rounded-0 bg-white text-black"},ge=he(()=>s("i",{class:"bi bi-geo-alt-fill me-1"},null,-1)),xe={class:"card-body"},ye={class:"card-title mb-10",style:{height:"60px"}},Te={class:"d-flex justify-content-between align-items-center"},Se={class:"fs-5 fs-xl-4"},Pe=["onClick"];function Me(o,e,g,f,h,_){const w=P("RouterLink");return y(),T("ul",fe,[(y(!0),T(L,null,O(g.pickProducts,(d,a)=>(y(),T("li",{key:a,class:"col-md-6 col-lg-3"},[M(w,{to:`/products/${d.id}`,class:"zoomIn w-100"},{default:S(()=>[s("div",be,[s("div",_e,[s("img",{src:d.imageUrl,class:"productImgHeight w-100",alt:d.title},null,8,we),s("div",ve,[ge,A(x(d.unit),1)])]),s("div",xe,[s("h5",ye,x(d.title),1),s("div",Te,[s("span",Se,"NT$ "+x(parseInt(d.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),s("button",{type:"button",class:"btn btn-primary border-2 rounded-3 text-white fw-600 px-5 py-3",onClick:D(i=>o.addToCart(d.id),["prevent"])}," 加入購物車 ",8,Pe)])])])]),_:2},1032,["to"])]))),128))])}const Ie=N(pe,[["render",Me],["__scopeId","data-v-b28e4fbc"]]),ke={data(){return{qty:1}},methods:{...j(X,["getProduct"]),...j(F,["addToCart"]),addQty(){this.qty<20&&(this.qty+=1)},subQty(){this.qty>1&&(this.qty-=1)}},mounted(){const{id:o}=this.$route.params;this.getProduct(o)},watch:{"$route.params":{handler(o){const{id:e}=o;this.getProduct(e)},deep:!0}},computed:{...G(X,["currentProduct","randomProducts"]),...G(F,["carts"])},components:{ProductDetailSwiper:me,RecommendProducts:Ie}},$=o=>(z("data-v-a3bba058"),o=o(),H(),o),Ce={class:"py-lg-12 py-md-10 py-8"},$e={class:"container"},Ee={class:"mb-6","aria-label":"breadcrumb"},Be={class:"breadcrumb"},Le={class:"breadcrumb-item"},Ae={class:"breadcrumb-item active","aria-current":"page"},De={class:"row"},Re={class:"col-md-6 col-xl-7 mb-4 mb-md-0"},Ve={class:"col-md-6 col-xl-5"},qe={class:"mb-6"},Oe={class:"fs-11 mb-2"},je={class:"d-block text-gray"},Fe=$(()=>s("i",{class:"bi bi-geo-alt-fill me-2"},null,-1)),Ne={class:"pb-5 pb-md-10"},ze={class:"d-flex d-md-block flex-column align-items-center"},He={class:"fs-11 mb-1 mb-md-2"},Qe={class:"fs-5 mb-2 mb-md-6"},Ue={class:"p-2 p-md-4 mt-4 mt-md-10"},Ge={class:"d-flex flex-column flex-lg-row align-items-center"},Xe={class:"d-flex justify-content-between align-items-center gap-2 me-lg-5 mb-6 mb-lg-0"},Ye=["disabled"],Je=$(()=>s("i",{class:"bi bi-dash fs-4"},null,-1)),Ke=[Je],We=["value"],Ze=["disabled"],et=$(()=>s("i",{class:"bi bi-plus fs-4"},null,-1)),tt=[et],st=$(()=>s("hr",{class:"mb-10"},null,-1)),it=$(()=>s("h3",{class:"mb-4"},"其他行程推薦",-1));function ot(o,e,g,f,h,_){const w=P("RouterLink"),d=P("ProductDetailSwiper"),a=P("RecommendProducts");return y(),T("main",Ce,[s("div",$e,[s("nav",Ee,[s("ol",Be,[s("li",Le,[M(w,{to:"/products"},{default:S(()=>[A("推薦行程")]),_:1})]),s("li",Ae,x(this.currentProduct.title),1)])]),s("div",De,[s("div",Re,[M(d,{images:this.currentProduct.imagesUrl},null,8,["images"])]),s("div",Ve,[s("div",qe,[s("h2",Oe,x(this.currentProduct.title),1),s("span",je,[Fe,A(x(this.currentProduct.unit),1)])]),s("div",Ne,[s("p",null,x(this.currentProduct.description),1)]),s("div",ze,[s("div",He,"NT$ "+x(parseInt(this.currentProduct.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),s("div",Qe,[A("原價 NT$ "),s("del",null,x(parseInt(this.currentProduct.origin_price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)]),s("div",Ue,[s("div",Ge,[s("div",Xe,[s("button",{type:"button",class:"border-0 bg-transparent",onClick:e[0]||(e[0]=D(i=>_.subQty(),["prevent"])),disabled:h.qty===1},Ke,8,Ye),s("input",{type:"text",class:"form-control border-0 text-center fs-4 p-0",min:"1",value:h.qty,style:{width:"80px"},readonly:""},null,8,We),s("button",{type:"button",class:"border-0 bg-transparent",onClick:e[1]||(e[1]=D(i=>_.addQty(),["prevent"])),disabled:h.qty===20},tt,8,Ze)]),s("button",{type:"button",class:"btn btn-primary border-2 rounded-3 text-white fw-600 px-5 py-3",style:{width:"200px"},onClick:e[2]||(e[2]=D(i=>o.addToCart(this.currentProduct.id,this.qty),["prevent"]))}," 加入購物車 ")])])])])]),st,it,M(a,{"pick-products":o.randomProducts},null,8,["pick-products"])])])}const ut=N(ke,[["render",ot],["__scopeId","data-v-a3bba058"]]);export{ut as default};
