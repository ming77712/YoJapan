import{a as _,S as p}from"./sweetalert2.all-KUWp0BWM.js";import{_ as S,f as k,m as E,r as u,o as i,c,a as s,g as a,w as h,F as m,i as I,t,d as P,h as f,p as B,e as M}from"./index-qf6BObBk.js";import{s as g}from"./sweetMessageStore-bMsU_DH6.js";import{P as V}from"./ProgressBar-cfcVM8WH.js";var O={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"ming777",BASE_URL:"/YoJapan/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y,VITE_PATH:x}=O,R={data(){return{order:{},isPaid:!1,progress:50}},methods:{...k(g,["setSweetMessageSuccess","setSweetMessageError"]),getOrder(o){_.get(`${y}/api/${x}/order/${o}`).then(r=>{this.order=r.data.order,this.order.is_paid===!0&&(this.isPaid=!0,this.progress=100)}).catch(r=>{this.setSweetMessageError(r.response.data.message),p.fire(this.sweetMessage)})},payOrder(o){_.post(`${y}/api/${x}/pay/${o}`).then(r=>{r.data.success&&(this.isPaid=!0,this.progress=100)}).catch(r=>{this.setSweetMessageError(r.response.data.message),p.fire(this.sweetMessage)})}},mounted(){const{id:o}=this.$route.params;this.getOrder(o)},computed:{...E(g,["sweetMessage"])},components:{ProgressBar:V}},n=o=>(B("data-v-03345ec3"),o=o(),M(),o),T={class:"container my-12"},L={key:0,class:"d-flex flex-column justify-content-center align-items-center mt-10"},F=n(()=>s("h2",{class:"mb-8"},"付款完成",-1)),U=n(()=>s("h3",{class:"text-center fs-4"},"訂單資訊",-1)),j=n(()=>s("hr",null,null,-1)),A={class:"row justify-content-center"},C={class:"col-md-7 mb-8 mb-md-0"},D={class:"row mb-4"},N={class:"col-md-5"},q=["src"],H={class:"col-md-7"},J={class:"fs-5 mt-5 mb-6"},Y={class:"d-flex justify-content-between align-items-center"},z={class:"mb-1"},G={class:"col-md-5"},K={key:0,class:"d-flex flex-column justify-content-evenly border-top border-md-0 p-4",style:{height:"500px"}},Q={class:"fs-5"},W={class:"fs-5"},X={class:"fs-5"},Z={class:"fs-5"},$={class:"fs-5"},ss={class:"fs-5"},es={key:0,class:"fs-5"},ts={key:1,class:"text-success fs-5"},os={class:"fs-5"},rs=n(()=>s("hr",null,null,-1)),is={class:"text-center"};function cs(o,r,ds,ns,e,b){const v=u("ProgressBar"),l=u("RouterLink");return i(),c("main",null,[s("div",T,[a(v,{progress:e.progress},null,8,["progress"]),e.isPaid?(i(),c("div",L,[F,s("div",null,[a(l,{to:"/",type:"button",class:"btn btnOutline border-2 rounded-3 fw-600 px-5 py-3 me-2"},{default:h(()=>[f(" 返回首頁 ")]),_:1}),a(l,{to:"/products",type:"button",class:"btn btn-primary border-2 rounded-3 fw-600 px-5 py-3"},{default:h(()=>[f(" 繼續選購 ")]),_:1})])])):(i(),c(m,{key:1},[U,j,s("div",A,[s("div",C,[(i(!0),c(m,null,I(e.order.products,(d,w)=>(i(),c("ul",{key:w},[s("li",D,[s("div",N,[s("img",{src:d.product.imageUrl,class:"w-100",style:{height:"150px"},alt:"product.product.title"},null,8,q)]),s("div",H,[s("h2",J,t(d.product.title),1),s("div",Y,[s("div",null,[s("div",z,"價格：$ "+t(parseInt(d.product.price).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","))+" x "+t(d.qty),1),s("div",null,"小計：$ "+t(parseInt(d.product.price*d.qty).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)])])])])]))),128))]),s("div",G,[e.order.user?(i(),c("ul",K,[s("li",Q,"訂單編號："+t(e.order.id),1),s("li",W,"信箱："+t(e.order.user.email),1),s("li",X,"姓名："+t(e.order.user.name),1),s("li",Z,"收件人電話："+t(e.order.user.tel),1),s("li",$,"收件人地址："+t(e.order.user.address),1),s("li",ss,"訂單金額："+t(parseInt(e.order.total).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),e.order.is_paid?(i(),c("li",ts,"付款狀態：付款完成")):(i(),c("li",es,"付款狀態：尚未付款")),s("li",os,"備註："+t(e.order.message),1)])):P("",!0)])]),rs,s("div",is,[s("button",{type:"submit",class:"btn btn-primary border-2 rounded-3 text-white fw-600 px-5 py-3 w-50",onClick:r[0]||(r[0]=d=>b.payOrder(e.order.id))}," 確認付款 ")])],64))])])}const us=S(R,[["render",cs],["__scopeId","data-v-03345ec3"]]);export{us as default};
